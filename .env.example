# ============================================================================
# ANALYTICBOT ENVIRONMENT CONFIGURATION TEMPLATE
# Copy this file to .env and update all values marked with CHANGE_ME
# ============================================================================

# ============================================================================
# CORE APPLICATION (Required)
# ============================================================================
ENVIRONMENT=development
DEBUG=true
APP_VERSION=7.5.0
APP_NAME=AnalyticBot

# ============================================================================
# TELEGRAM BOT CONFIGURATION (Required)
# ============================================================================
BOT_TOKEN=CHANGE_ME_BOT_TOKEN_FROM_BOTFATHER
STORAGE_CHANNEL_ID=CHANGE_ME_CHANNEL_ID  
ADMIN_IDS=CHANGE_ME_COMMA_SEPARATED_USER_IDS

# Localization (Optional)
SUPPORTED_LOCALES=en,uz
DEFAULT_LOCALE=en

# Bot settings (Optional)
BOT_WEBHOOK_HOST=
BOT_WEBHOOK_PATH=/webhook/telegram
BOT_WEBHOOK_SECRET=CHANGE_ME_WEBHOOK_SECRET

# ============================================================================
# DATABASE CONFIGURATION (Required)
# ============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=analyticbot
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=analyticbot_db

# Full connection URL (Optional - overrides above if provided)
# Development: postgresql+asyncpg://analyticbot:password@localhost:5432/analyticbot_db
# Production: postgresql+asyncpg://analyticbot:password@postgres:5432/analyticbot_db
# DATABASE_URL=

# Redis for caching and session storage (Required)
REDIS_URL=redis://localhost:6379/0

# Database connection pool settings (Optional)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_ECHO=false

# ============================================================================
# API & WEB APPLICATION (Required for API service)
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_HOST_URL=http://localhost:8000

# Telegram Web App frontend URL (Required - must be HTTPS in production)
TWA_HOST_URL=CHANGE_ME_FRONTEND_URL

# CORS allowed origins (Required - comma-separated for multiple)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# API security (Optional)
API_REQUEST_TIMEOUT=30
API_MAX_REQUEST_SIZE=10485760  # 10MB

# ============================================================================
# SECURITY & AUTHENTICATION (Required for production)
# ============================================================================
# JWT Secret (Required - generate with: openssl rand -hex 32)
JWT_SECRET_KEY=CHANGE_ME_RANDOM_32_BYTE_HEX_STRING

# JWT configuration (Optional)
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password security (Optional)
PASSWORD_HASH_ROUNDS=12
PASSWORD_MIN_LENGTH=8

# Rate limiting (Optional)
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_ENABLED=true

# ============================================================================
# PAYMENT GATEWAYS (Optional - only if payment features are enabled)
# ============================================================================

# Stripe (International payments - optional)
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PUBLISHABLE_KEY=

# PayMe (Uzbekistan payment system - optional)
PAYME_SECRET_KEY=
PAYME_MERCHANT_ID=

# Click (Uzbekistan payment system - optional)  
CLICK_SECRET_KEY=
CLICK_MERCHANT_ID=

# ============================================================================
# MONITORING & OBSERVABILITY (Optional but recommended)
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=structured  # text, structured, json
LOG_FILE_PATH=logs/app.log
LOG_ROTATION_SIZE=10MB
LOG_RETENTION_DAYS=30

# Error tracking (Optional - highly recommended for production)
SENTRY_DSN=
SENTRY_ENVIRONMENT=${ENVIRONMENT}
SENTRY_SAMPLE_RATE=0.1

# Metrics and monitoring (Optional)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# Health check configuration (Optional)
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# ============================================================================
# BACKGROUND TASKS & SCHEDULING (Optional)
# ============================================================================
# Celery/Redis queue settings
CELERY_BROKER_URL=${REDIS_URL}
CELERY_RESULT_BACKEND=${REDIS_URL}
CELERY_TASK_ALWAYS_EAGER=false
CELERY_WORKER_CONCURRENCY=4

# Task retry configuration (Optional)
TASK_RETRY_DELAY=30           # Base retry delay in seconds
TASK_MAX_RETRIES=5            # Maximum retry attempts

# Task scheduling intervals (Optional - in seconds)
SCHEDULER_ENABLED=true
ANALYTICS_UPDATE_INTERVAL=300  # 5 minutes - analytics data refresh
HEALTH_CHECK_INTERVAL=300      # 5 minutes - system health checks
REPORT_GENERATION_SCHEDULE=0 8 * * *  # Daily at 8 AM (cron format)

# Task timeouts (Optional)
TASK_TIME_LIMIT=600           # 10 minutes hard limit
TASK_SOFT_TIME_LIMIT=540      # 9 minutes soft limit

# ============================================================================
# FEATURE FLAGS (Optional - for enabling/disabling features)
# ============================================================================
ENFORCE_PLAN_LIMITS=true
ANALYTICS_ENABLED=true
PAYMENT_PROCESSING_ENABLED=false
NOTIFICATIONS_ENABLED=true
WEBHOOK_DELIVERY_ENABLED=true
RATE_LIMITING_ENABLED=true

# Phase 4.5 Feature Flags
SHARE_LINKS_ENABLED=true
MTPROTO_ENABLED=true
MTPROTO_UPDATES_ENABLED=true
ANALYTICS_CACHE_ENABLED=true
TRENDING_ANALYTICS_ENABLED=true
GRACEFUL_SHUTDOWN_ENABLED=true
BACKGROUND_CLEANUP_ENABLED=true

# Performance & Caching
ETAG_CACHE_ENABLED=true
RESPONSE_COMPRESSION_ENABLED=true
MATERIALIZED_VIEWS_ENABLED=true

# ============================================================================
# EXTERNAL SERVICES & INTEGRATIONS (Optional)
# ============================================================================
# OpenAI for AI features (Optional)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=1500

# Anthropic Claude for Smart Auto-Fixer (Optional)
ANTHROPIC_API_KEY=CHANGE_ME_ANTHROPIC_API_KEY

# Email/SMTP configuration (Optional)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=no-reply@example.com
SMTP_FROM_NAME=AnalyticBot

# File storage (Optional - for file uploads)
STORAGE_TYPE=local  # local, s3, gcs
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_S3_BUCKET=
AWS_S3_REGION=us-east-1

# ============================================================================
# DEVELOPMENT & TESTING (Development only)
# ============================================================================
# Testing database (Optional - for running tests)
TEST_DATABASE_URL=postgresql+asyncpg://analyticbot:password@localhost:5432/analyticbot_test

# Development tools (Optional)
RELOAD_ON_CHANGE=true
API_DOCS_ENABLED=true
DEBUG_TOOLBAR_ENABLED=false

# Mock external services (Development only)
MOCK_TELEGRAM_API=false
MOCK_PAYMENT_GATEWAYS=true
MOCK_EMAIL_DELIVERY=true

