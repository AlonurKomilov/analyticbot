[importlinter]
root_package = .
include_external_packages = false

[contract:core_no_apps_infra]
name = Core must not import apps/infra
type = forbidden
source_modules = core
forbidden_modules =
    apps
    infra

[contract:infra_no_apps]
name = Infra must not import apps
type = forbidden
source_modules = infra
forbidden_modules =
    apps

[contract:clean_architecture_layers]
name = Clean Architecture Layer Enforcement
type = layers
layers =
    core
    infra
    apps

[contract:apps_restricted_infra_imports]
name = Apps can only import infra in composition roots
type = forbidden
source_modules = 
    apps.*.routers
    apps.*.handlers
    apps.*.services
    apps.*.middlewares
    apps.*.tasks
    apps.*.utils
    apps.*.collectors
forbidden_modules =
    infra