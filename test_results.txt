
==================================== ERRORS ====================================
___________ ERROR collecting tests/perf/mtproto_performance_test.py ____________
tests/perf/mtproto_performance_test.py:17: in <module>
    from apps.mtproto.config import MTProtoSettings
apps/mtproto/__init__.py:3: in <module>
    from .config import MTProtoSettings
apps/mtproto/config.py:5: in <module>
    class MTProtoSettings(BaseSettings):
apps/mtproto/config.py:160: in MTProtoSettings
    if os.getenv("ENVIRONMENT") != "development"
       ^^
E   NameError: name 'os' is not defined
________________ ERROR collecting tests/test_payment_system.py _________________
ImportError while importing test module '/home/runner/work/analyticbot/analyticbot/tests/test_payment_system.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_payment_system.py:15: in <module>
    from apps.bot.models.payment import BillingCycle, PaymentProvider, SubscriptionCreate
apps/bot/__init__.py:11: in <module>
    from apps.bot.handlers import alerts, exports
apps/bot/handlers/alerts.py:14: in <module>
    from apps.bot.middlewares.throttle import throttle
apps/bot/middlewares/__init__.py:3: in <module>
    from .dependency_middleware import DependencyMiddleware
apps/bot/middlewares/dependency_middleware.py:13: in <module>
    from apps.bot.services import (
apps/bot/services/__init__.py:1: in <module>
    from .analytics_service import AnalyticsService
apps/bot/services/analytics_service.py:17: in <module>
    from infra.db.performance import (
E   ImportError: cannot import name 'cache_result' from 'infra.db.performance' (/home/runner/work/analyticbot/analyticbot/infra/db/performance.py)
__________________ ERROR collecting tests/test_performance.py __________________
ImportError while importing test module '/home/runner/work/analyticbot/analyticbot/tests/test_performance.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_performance.py:11: in <module>
    from apps.bot.services.analytics_service import AnalyticsService
apps/bot/__init__.py:11: in <module>
    from apps.bot.handlers import alerts, exports
apps/bot/handlers/alerts.py:14: in <module>
    from apps.bot.middlewares.throttle import throttle
apps/bot/middlewares/__init__.py:3: in <module>
    from .dependency_middleware import DependencyMiddleware
apps/bot/middlewares/dependency_middleware.py:13: in <module>
    from apps.bot.services import (
apps/bot/services/__init__.py:1: in <module>
    from .analytics_service import AnalyticsService
apps/bot/services/analytics_service.py:17: in <module>
    from infra.db.performance import (
E   ImportError: cannot import name 'cache_result' from 'infra.db.performance' (/home/runner/work/analyticbot/analyticbot/infra/db/performance.py)
____________ ERROR collecting tests/unit/test_analytics_service.py _____________
ImportError while importing test module '/home/runner/work/analyticbot/analyticbot/tests/unit/test_analytics_service.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_analytics_service.py:6: in <module>
    from apps.bot.services.analytics_service import AnalyticsService
apps/bot/__init__.py:11: in <module>
    from apps.bot.handlers import alerts, exports
apps/bot/handlers/alerts.py:14: in <module>
    from apps.bot.middlewares.throttle import throttle
apps/bot/middlewares/__init__.py:3: in <module>
    from .dependency_middleware import DependencyMiddleware
apps/bot/middlewares/dependency_middleware.py:13: in <module>
    from apps.bot.services import (
apps/bot/services/__init__.py:1: in <module>
    from .analytics_service import AnalyticsService
apps/bot/services/analytics_service.py:17: in <module>
    from infra.db.performance import (
E   ImportError: cannot import name 'cache_result' from 'infra.db.performance' (/home/runner/work/analyticbot/analyticbot/infra/db/performance.py)
____________ ERROR collecting tests/unit/test_content_protection.py ____________
ImportError while importing test module '/home/runner/work/analyticbot/analyticbot/tests/unit/test_content_protection.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/unit/test_content_protection.py:12: in <module>
    from apps.bot.models.content_protection import (
apps/bot/__init__.py:11: in <module>
    from apps.bot.handlers import alerts, exports
apps/bot/handlers/alerts.py:14: in <module>
    from apps.bot.middlewares.throttle import throttle
apps/bot/middlewares/__init__.py:3: in <module>
    from .dependency_middleware import DependencyMiddleware
apps/bot/middlewares/dependency_middleware.py:13: in <module>
    from apps.bot.services import (
apps/bot/services/__init__.py:1: in <module>
    from .analytics_service import AnalyticsService
apps/bot/services/analytics_service.py:17: in <module>
    from infra.db.performance import (
E   ImportError: cannot import name 'cache_result' from 'infra.db.performance' (/home/runner/work/analyticbot/analyticbot/infra/db/performance.py)
=========================== short test summary info ============================
ERROR tests/perf/mtproto_performance_test.py - NameError: name 'os' is not defined
ERROR tests/test_payment_system.py
ERROR tests/test_performance.py
ERROR tests/unit/test_analytics_service.py
ERROR tests/unit/test_content_protection.py
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 5 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
