
==================================== ERRORS ====================================
_______________ ERROR collecting tests/test_analytics_service.py _______________
tests/test_analytics_service.py:7: in <module>
    from apps.bot.services.analytics_service import AnalyticsService
apps/bot/services/__init__.py:1: in <module>
    from .analytics_service import AnalyticsService
apps/bot/services/analytics_service.py:15: in <module>
    from apps.bot.database.performance import (
apps/bot/database/performance.py:19: in <module>
    from apps.bot.config import settings
apps/bot/config.py:8: in <module>
    from config.settings import Settings as MainSettings
config/__init__.py:5: in <module>
    from .settings import settings
config/settings.py:183: in <module>
    settings = Settings()
               ^^^^^^^^^^
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/pydantic_settings/main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
E   BOT_TOKEN
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   STORAGE_CHANNEL_ID
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   TWA_HOST_URL
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   JWT_SECRET_KEY
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
_________________ ERROR collecting tests/test_guard_service.py _________________
ImportError while importing test module '/home/runner/work/analyticbot/analyticbot/tests/test_guard_service.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
tests/test_guard_service.py:1: in <module>
    import fakeredis.aioredis
E   ModuleNotFoundError: No module named 'fakeredis'
____________________ ERROR collecting tests/test_health.py _____________________
tests/test_health.py:8: in <module>
    from apps.api.main import app
apps/api/main.py:13: in <module>
    from apps.api.deps import cleanup_db_pool, get_delivery_service, get_schedule_service
apps/api/deps.py:11: in <module>
    from config import settings
config/__init__.py:5: in <module>
    from .settings import settings
config/settings.py:183: in <module>
    settings = Settings()
               ^^^^^^^^^^
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/pydantic_settings/main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
E   BOT_TOKEN
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   STORAGE_CHANNEL_ID
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   TWA_HOST_URL
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   JWT_SECRET_KEY
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
_____________ ERROR collecting tests/test_integration_complete.py ______________
tests/test_integration_complete.py:10: in <module>
    from apps.bot.services.analytics_service import AnalyticsService
apps/bot/services/__init__.py:1: in <module>
    from .analytics_service import AnalyticsService
apps/bot/services/analytics_service.py:15: in <module>
    from apps.bot.database.performance import (
apps/bot/database/performance.py:19: in <module>
    from apps.bot.config import settings
apps/bot/config.py:8: in <module>
    from config.settings import Settings as MainSettings
config/__init__.py:5: in <module>
    from .settings import settings
config/settings.py:183: in <module>
    settings = Settings()
               ^^^^^^^^^^
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/pydantic_settings/main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
E   BOT_TOKEN
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   STORAGE_CHANNEL_ID
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   TWA_HOST_URL
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   JWT_SECRET_KEY
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
__________________ ERROR collecting tests/test_performance.py __________________
tests/test_performance.py:13: in <module>
    from apps.bot.services.analytics_service import AnalyticsService
apps/bot/services/__init__.py:1: in <module>
    from .analytics_service import AnalyticsService
apps/bot/services/analytics_service.py:15: in <module>
    from apps.bot.database.performance import (
apps/bot/database/performance.py:19: in <module>
    from apps.bot.config import settings
apps/bot/config.py:8: in <module>
    from config.settings import Settings as MainSettings
config/__init__.py:5: in <module>
    from .settings import settings
config/settings.py:183: in <module>
    settings = Settings()
               ^^^^^^^^^^
/opt/hostedtoolcache/Python/3.11.13/x64/lib/python3.11/site-packages/pydantic_settings/main.py:188: in __init__
    super().__init__(
E   pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
E   BOT_TOKEN
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   STORAGE_CHANNEL_ID
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   TWA_HOST_URL
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
E   JWT_SECRET_KEY
E     Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.9/v/missing
=========================== short test summary info ============================
ERROR tests/test_analytics_service.py - pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
BOT_TOKEN
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
STORAGE_CHANNEL_ID
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
TWA_HOST_URL
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
JWT_SECRET_KEY
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
ERROR tests/test_guard_service.py
ERROR tests/test_health.py - pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
BOT_TOKEN
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
STORAGE_CHANNEL_ID
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
TWA_HOST_URL
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
JWT_SECRET_KEY
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
ERROR tests/test_integration_complete.py - pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
BOT_TOKEN
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
STORAGE_CHANNEL_ID
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
TWA_HOST_URL
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
JWT_SECRET_KEY
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
ERROR tests/test_performance.py - pydantic_core._pydantic_core.ValidationError: 4 validation errors for Settings
BOT_TOKEN
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
STORAGE_CHANNEL_ID
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
TWA_HOST_URL
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
JWT_SECRET_KEY
  Field required [type=missing, input_value={'POSTGRES_USER': 'analyt...redis://localhost:6379'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.9/v/missing
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 5 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
