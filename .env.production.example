# ============================================================================
# ANALYTICBOT PRODUCTION ENVIRONMENT TEMPLATE
# Copy this file to .env.production and configure with your actual values
# Port Series: 10xxx (Production/Docker) - All containerized services
# ============================================================================

# ============================================================================
# CORE APPLICATION
# ============================================================================
ENVIRONMENT=production
DEBUG=false
APP_VERSION=7.5.0
APP_NAME=AnalyticBot

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE_PATH=var/logs/production.log
LOG_RETENTION_DAYS=30
LOG_ROTATION_SIZE=100MB

# ============================================================================
# PRODUCTION FEATURES & API CONFIGURATION
# ============================================================================
ENABLE_CORS=true
ENABLE_DOCS=false
ENABLE_HOT_RELOAD=false
ENABLE_DEBUG_TOOLBAR=false
DEBUG_TOOLBAR_ENABLED=false
API_DOCS_ENABLED=false
API_MAX_REQUEST_SIZE=50MB
API_REQUEST_TIMEOUT=60
RELOAD_ON_CHANGE=false
RESPONSE_COMPRESSION_ENABLED=true
GRACEFUL_SHUTDOWN_ENABLED=true

# ============================================================================
# TELEGRAM BOT CONFIGURATION
# ============================================================================
BOT_TOKEN=CHANGE_ME_YOUR_PRODUCTION_BOT_TOKEN
STORAGE_CHANNEL_ID=CHANGE_ME_YOUR_STORAGE_CHANNEL_ID
ADMIN_IDS=CHANGE_ME_COMMA_SEPARATED_ADMIN_USER_IDS
ADMIN_IDS_STR=CHANGE_ME_COMMA_SEPARATED_ADMIN_USER_IDS
DEFAULT_LOCALE=en
SUPPORTED_LOCALES=en,uz
BOT_DEBUG=false

# Bot Webhook (Production)
BOT_WEBHOOK_HOST=CHANGE_ME_YOUR_DOMAIN_OR_IP
BOT_WEBHOOK_PATH=/webhook/telegram
BOT_WEBHOOK_SECRET=CHANGE_ME_STRONG_WEBHOOK_SECRET

# ============================================================================
# DATABASE CONFIGURATION - Production (Docker Internal)
# ============================================================================
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=analytic
POSTGRES_PASSWORD=CHANGE_ME_VERY_STRONG_DATABASE_PASSWORD
POSTGRES_DB=analytic_bot
DATABASE_URL=postgresql+asyncpg://analytic:CHANGE_ME_PASSWORD@db:5432/analytic_bot

# Database Connection Pool Settings (Production)
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=60
DB_ECHO=false

# External Docker ports for debugging
POSTGRES_EXTERNAL_PORT=10100

# ============================================================================
# REDIS CONFIGURATION - Production (Docker Internal)
# ============================================================================
REDIS_URL=redis://redis:6379/0
REDIS_PORT=6379
REDIS_EXTERNAL_PORT=10200

# ============================================================================
# API CONFIGURATION - Production (10300 series)
# ============================================================================
API_HOST=0.0.0.0
API_PORT=10300
API_RELOAD=false
API_HOST_URL=http://api:10300
API_HOST_URL_EXTERNAL=CHANGE_ME_YOUR_EXTERNAL_API_URL

# ============================================================================
# FRONTEND CONFIGURATION - Production (10400 series)
# ============================================================================
FRONTEND_PORT=10400
VITE_API_URL=http://api:10300
VITE_API_BASE_URL=http://api:10300/api
VITE_NODE_ENV=production
VITE_ENABLE_ANALYTICS=true
VITE_ENABLE_DEBUG=false
VITE_DEFAULT_THEME=dark
VITE_DEBUG=false

# ============================================================================
# CORS CONFIGURATION - Production
# ============================================================================
CORS_ORIGINS=["http://frontend:10400","https://CHANGE_ME_YOUR_DOMAIN","CHANGE_ME_YOUR_EXTERNAL_FRONTEND_URL"]

# ============================================================================
# SECURITY & AUTHENTICATION - Production
# ============================================================================
JWT_SECRET_KEY=CHANGE_ME_VERY_STRONG_JWT_SECRET_KEY_AT_LEAST_64_CHARACTERS_LONG
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30
SECRET_KEY=CHANGE_ME_VERY_STRONG_SECRET_KEY_FOR_ENCRYPTION
PASSWORD_MIN_LENGTH=8
PASSWORD_HASH_ROUNDS=12

# ============================================================================
# MTPROTO CONFIGURATION - Production
# ============================================================================
MTPROTO_ENABLED=false
MTPROTO_HISTORY_ENABLED=false
MTPROTO_UPDATES_ENABLED=false
MTPROTO_STATS_ENABLED=false
TELEGRAM_API_ID=CHANGE_ME_YOUR_TELEGRAM_API_ID
TELEGRAM_API_HASH=CHANGE_ME_YOUR_TELEGRAM_API_HASH
TELEGRAM_SESSION_NAME=analyticbot_session

# MTProto Collection Settings (Production Safe Limits)
MTPROTO_PEERS=[]
MTPROTO_HISTORY_LIMIT_PER_RUN=50
MTPROTO_CONCURRENCY=1
MTPROTO_SLEEP_THRESHOLD=2.0

# ============================================================================
# PAYMENT SYSTEM - Production
# ============================================================================
PAYMENT_PROCESSING_ENABLED=true
MOCK_PAYMENT_GATEWAYS=false

# Stripe (Production Keys)
STRIPE_SECRET_KEY=sk_live_CHANGE_ME_YOUR_STRIPE_LIVE_SECRET_KEY
STRIPE_PUBLISHABLE_KEY=pk_live_CHANGE_ME_YOUR_STRIPE_LIVE_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=whsec_CHANGE_ME_YOUR_STRIPE_LIVE_WEBHOOK_SECRET
VITE_STRIPE_PUBLISHABLE_KEY=pk_live_CHANGE_ME_YOUR_STRIPE_LIVE_PUBLISHABLE_KEY
VITE_STRIPE_TEST_MODE=false

# PayMe (Uzbekistan)
PAYME_SECRET_KEY=CHANGE_ME_YOUR_PAYME_SECRET_KEY
PAYME_MERCHANT_ID=CHANGE_ME_YOUR_PAYME_MERCHANT_ID

# Click (Uzbekistan)
CLICK_SECRET_KEY=CHANGE_ME_YOUR_CLICK_SECRET_KEY
CLICK_MERCHANT_ID=CHANGE_ME_YOUR_CLICK_MERCHANT_ID

# ============================================================================
# TWA CONFIGURATION - Production
# ============================================================================
TWA_HOST_URL=CHANGE_ME_YOUR_TWA_HOST_URL
VITE_TWA_BOT_USERNAME=@your_production_bot_username
VITE_TWA_START_PARAM=analytics

# ============================================================================
# ANALYTICS & MONITORING - Production
# ============================================================================
ANALYTICS_ENABLED=true
ANALYTICS_CACHE_ENABLED=true
ANALYTICS_UPDATE_INTERVAL=600
TRENDING_ANALYTICS_ENABLED=true
MATERIALIZED_VIEWS_ENABLED=true

# Prometheus (Production)
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# Sentry (Production)
SENTRY_DSN=CHANGE_ME_YOUR_SENTRY_DSN
SENTRY_ENVIRONMENT=production
SENTRY_SAMPLE_RATE=0.25
VITE_SENTRY_DSN=CHANGE_ME_YOUR_SENTRY_DSN

# ============================================================================
# AI SERVICES - Production
# ============================================================================
ANTHROPIC_API_KEY=CHANGE_ME_YOUR_ANTHROPIC_API_KEY
OPENAI_API_KEY=CHANGE_ME_YOUR_OPENAI_API_KEY
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=4000

# ============================================================================
# STORAGE & FILE HANDLING - Production
# ============================================================================
STORAGE_TYPE=s3
AWS_ACCESS_KEY_ID=CHANGE_ME_YOUR_AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY=CHANGE_ME_YOUR_AWS_SECRET_ACCESS_KEY
AWS_S3_BUCKET=CHANGE_ME_YOUR_S3_BUCKET_NAME
AWS_S3_REGION=us-east-1

# ============================================================================
# EMAIL CONFIGURATION - Production
# ============================================================================
MOCK_EMAIL_DELIVERY=false
SMTP_HOST=CHANGE_ME_YOUR_SMTP_HOST
SMTP_PORT=587
SMTP_USER=CHANGE_ME_YOUR_SMTP_USER
SMTP_PASSWORD=CHANGE_ME_YOUR_SMTP_PASSWORD
SMTP_USE_TLS=true
SMTP_FROM_NAME=AnalyticBot
SMTP_FROM_EMAIL=noreply@yourdomain.com

# ============================================================================
# TASK QUEUE & BACKGROUND JOBS - Production
# ============================================================================
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2
CELERY_TASK_ALWAYS_EAGER=false
CELERY_WORKER_CONCURRENCY=4
SCHEDULER_ENABLED=true
BACKGROUND_CLEANUP_ENABLED=true

# Task Configuration (Production)
TASK_MAX_RETRIES=5
TASK_RETRY_DELAY=300
TASK_TIME_LIMIT=1800
TASK_SOFT_TIME_LIMIT=1500

# ============================================================================
# RATE LIMITING & SECURITY - Production
# ============================================================================
RATE_LIMITING_ENABLED=true
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
ENFORCE_PLAN_LIMITS=true

# ============================================================================
# HEALTH CHECKS & MONITORING - Production
# ============================================================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=60
HEALTH_CHECK_TIMEOUT=30
WEBHOOK_DELIVERY_ENABLED=true

# ============================================================================
# FEATURE FLAGS - Production
# ============================================================================
NOTIFICATIONS_ENABLED=true
SHARE_LINKS_ENABLED=true
ETAG_CACHE_ENABLED=true
MOCK_TELEGRAM_API=false

# ============================================================================
# EXTERNAL ACCESS - Production
# ============================================================================
EXTERNAL_API_URL=CHANGE_ME_YOUR_EXTERNAL_API_URL
EXTERNAL_FRONTEND_URL=CHANGE_ME_YOUR_EXTERNAL_FRONTEND_URL
DOMAIN=CHANGE_ME_YOUR_DOMAIN

# ============================================================================
# DOCKER CONFIGURATION - Production
# ============================================================================
DOCKER_DATABASE_URL=postgresql+asyncpg://analytic:CHANGE_ME_PASSWORD@db:5432/analytic_bot
DOCKER_REDIS_URL=redis://redis:6379/0
DOCKER_API_HOST_URL=http://api:10300

# ============================================================================
# PRODUCTION OPTIMIZATION
# ============================================================================
# Worker processes
API_WORKERS=4
BOT_WORKERS=1

# Additional connection pools (Redis)
REDIS_POOL_SIZE=10

# Caching
ENABLE_RESPONSE_CACHE=true
CACHE_TTL=300

# Security headers
ENABLE_SECURITY_HEADERS=true
HSTS_MAX_AGE=31536000

# Report Generation (Production - Scheduled)
REPORT_GENERATION_SCHEDULE=daily
